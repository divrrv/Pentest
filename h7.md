# h7 Hash

#### x) Lue/katso/kuuntele ja tiivistä.

##### Karvinen 2022: Cracking Passwords with Hashcat

- Artikkelissa käydään läpi Hashcat salasanan murto-ohjelmaa
- Ohjelman lataus -> `sudo apt-get update, sudo apt-get -y install hashid hashcat wget`
- Kansion luonti ja sinne siirtyminen ->` mkdir hashed` , `cd hashed`
- Suositun salasana sanakirjan lataus -> `wget https://github.com/danielmiessler/SecLists/raw/master/Passwords/Leaked-Databases/rockyou.txt.tar.gz` , `tar xf rockyou.txt.tar.gz` , `rm rockyou.txt.tar.gz`
- Hash tyypin tunnistus -> `hashid -m 6b1628b016dff46e6fa35684be6acc96`
- Hash:in murto ladattua sanakirjaa käyttäen hascat:illä ja vastauksen tallentaminen solved nimiseen tiedostoon -> `hashcat -m 0 '6b1628b016dff46e6fa35684be6acc96' rockyou.txt -o solved`

##### Karvinen 2023: Crack File Password With John

- Artikkelissa käydään läpi John the Ripper salasanan murto-ohjelmaa
- Ennen ohjelman latausta -> `sudo apt-get update` , `sudo apt-get -y install micro bash-completion git build-essential libssl-dev zlib1g zlib1g-dev zlib-gst libbz2-1.0 libbz2-dev atool zip wget`
- Ohjelman lataus -> `git clone --depth=1 https://github.com/openwall/john.git` , `cd john/src/` , `./configure` , `make -s clean && make -sj4`
- Ohjelman testaus -> `$HOME/john/run/john`
- Salasana suojatun tiedoston lataus -> `wget https://TeroKarvinen.com/2023/crack-file-password-with-john/tero.zip`
- Hash:in poimiminen uuteen tiedostoon -> `$HOME/john/run/zip2john tero.zip >tero.zip.hash`
- Salasanan murtaminen John the ripperillä -> `$HOME/john/run/john tero.zip.hash`
- Avaa salattu tiedosto -> `unzip tero.zip`
- Katso tiedoston sisältö -> `cat secretFiles/SECRET.md`


#### a) Hashcat. Asenna Hashcat ja testaa sen toimivuus ratkaisemalla tiiviste.

- Tein tehtävän x kohdan Karvinen 2022: Cracking Passwords with Hashcat ohjeiden mukaan.

- Aloitin päivittämällä ja lataamalla hascat:in komennoilla


      sudo apt-get update
      sudo apt-get -y install hashid hashcat wget

- Tein kansion ja latasin sanalistan komennoilla

      mkdir hashed
      cd hashed
      wget https://github.com/danielmiessler/SecLists/raw/master/Passwords/Leaked-Databases/rockyou.txt.tar.gz
  
![image](https://github.com/divrrv/Pentest/assets/112497215/787c2664-c663-4e77-99d0-ef2b08ac16fe)

- Hash tyypin tunnistus

![image](https://github.com/divrrv/Pentest/assets/112497215/2c1fd762-8e8a-432b-9544-c077053da85e)

- Hash:in murto ja vastauksen tallennus solved tiedostoon

      hashcat -m 0 '6b1628b016dff46e6fa35684be6acc96' rockyou.txt -o solved

![image](https://github.com/divrrv/Pentest/assets/112497215/7cf1594c-c682-4eb3-bed7-1557e6e36a3e)

#### b) John. Asenna Jumbo John ja testaa sen toimivuus murtamalla jonkin tiedoston salasana.

- Tein tehtävän x kohdan Karvinen 2023: Crack File Password With John ohjeiden mukaan.

- Edellytyksien lataus

        sudo apt-get -y install micro bash-completion git build-essential libssl-dev zlib1g zlib1g-dev zlib-gst libbz2-1.0 libbz2-dev atool zip wget

- John the ripperin lataus ja kokoaminen jumbo versioksi

        git clone --depth=1 https://github.com/openwall/john.git
        cd john/src/
        ./configure
        make -s clean && make -sj4

- Testataan että toimii

      $HOME/john/run/john

- Ladataan salasanalla suojattu ZIP tiedosto

      wget https://TeroKarvinen.com/2023/crack-file-password-with-john/tero.zip

- Yritetään murtaa salasana

      $HOME/john/run/john tero.zip.hash


- Salasana löytyi

![image](https://github.com/divrrv/Pentest/assets/112497215/b1d1faff-84cf-4be3-850f-f7a6f1a3a20a)

- Avataan tiedosto salasanalla

      unzip tero.zip

![image](https://github.com/divrrv/Pentest/assets/112497215/6fab65d7-03c7-47e8-a4d7-84cf2485c979)

#### c) f5bc7fcc7f5b3b6af7ff79e0feafad6d1a948b6a2c18de414993c1226be48c1f

- Tein tehtävän x kohdan Karvinen 2022: Cracking Passwords with Hashcat ohjeiden mukaan.

- Aloitin hash tyypin tunnistuksella komennolla

        hashid -m f5bc7fcc7f5b3b6af7ff79e0feafad6d1a948b6a2c18de414993c1226be48c1f

![image](https://github.com/divrrv/Pentest/assets/112497215/170f2403-7ad9-43da-af0f-3cca857ba73a)

- Artikkelissa neuvottiin, että oikea tyyppi on usein kärki kolmikon joukossa.
- Testasin ensimmäistä, cewl:illä luodulla sanakirjalla.
- Cewl asennus

        sudo apt-get install cewl
  
- Sanakirjan luonti tehtävän sivusta komennolla.

        cewl -w sanat.txt https://terokarvinen.com/2023/eettinen-hakkerointi-2023/

- Ensimmäisen testaus

        hashcat -m 1400 'f5bc7fcc7f5b3b6af7ff79e0feafad6d1a948b6a2c18de414993c1226be48c1f' sanat.txt -o aswer

- Murto onnistui ja vastaus tallentui aswer.txt tiedostoon, jonka nimeämisessä kävi kirjoitus virhe. Tarkoitus oli nimetä tiedosto answer.txt

![image](https://github.com/divrrv/Pentest/assets/112497215/cc65d1d2-8eff-47f6-a502-94b10a032fd5)


#### d) Cheatsheet.

#### [lähde](https://github.com/JanaHalt/Ethical-Hacking-2023/blob/7acd5e9148d6d01ece3d9f0b8cd0f58540eb2c61/h3%20Lab%20kid.md)
     Gobuster löytää piilotetttuja URL-osoitteita, tiedostoja ja hakemistoja nettisivuilta.

      sudo apt install golang-go
      go version

      sudo apt install gobuster
      gobuster -h

      gobuster dir -u 192.168.12.3 -w /usr/share/seclists/Discovery/Web-Content/dirsearch.txt --no-error

            dir dir moodi

            -u mihin skannaus kohdistetaan. Tässä tapauksessa metasploitable-virtuaalikone.

            -w wordlist

            --no-errorälä näytä virheitä

#### e) Tarkista tehtävien lähdeviitteet

- Lähteet tarkistettu ja ovat kunnossa.

#### Lähteet

- https://terokarvinen.com/2022/cracking-passwords-with-hashcat/
- https://terokarvinen.com/2023/crack-file-password-with-john/
- https://terokarvinen.com/2023/eettinen-hakkerointi-2023/#h7-hash
- https://www.kali.org/tools/cewl/
- https://github.com/JanaHalt/Ethical-Hacking-2023/blob/7acd5e9148d6d01ece3d9f0b8cd0f58540eb2c61/h3%20Lab%20kid.md
- https://github.com/Viktorialissa/PenTest/blob/main/h7.md
